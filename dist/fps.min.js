!function(){function e(){o.props.frames++,o.props.isCollecting&&window.requestAnimationFrame(e)}function t(){var e="",t=navigator.userAgent,n=t.indexOf("("),o=t.indexOf(")");return e=t.substring(n+1,o),e=e.replace(/;/g,"")}function n(e){var t=e.length,n=e.reduce(function(e,t){return e+t},0);return Math.round(n/t*100)/100}var o={props:{frames:0,startTime:void 0,endTime:void 0,isCollecting:!1,collectedFPS:[],collectionRate:500}};o.init=function(e){this.config=e?e:{duration:5e3},this.appendFlashScreen(),this.start()},o.appendFlashScreen=function(){var e=document.createElement("div");e.id="flashScreen",e.style.position="absolute",e.style.top=0,e.style.bottom=0,e.style.left=0,e.style.right=0,e.style.zIndex=1e6,e.style.display="none",e.style.opacity=.75,document.body.appendChild(e)},o.flashScreen=function(e){var t,n=document.getElementById("flashScreen");switch(e){case"fail":t="red";break;case"othercase":t="yellow";break;case"success":t="green";break;default:t="green"}n&&(n.style.backgroundColor=t,n.style.display="block",setTimeout(function(){n.style.display="none"},200))},o.start=function(){this.props.startTime=window.performance.now(),this.props.isCollecting=!0,e(),this.initCollecting(),this.startCountdown()},o.initCollecting=function(){var e=this,t=setInterval(function(){e.props.isCollecting?e.props.collectedFPS.push(e.calcFPS()):(clearInterval(t),e.stop())},e.props.collectionRate)},o.startCountdown=function(){var e=this;setTimeout(function(){e.props.isCollecting=!1},e.config.duration)},o.calcFPS=function(){var e=(window.performance.now()-this.props.startTime)/1e3;return Math.round(this.props.frames/e*100)/100},o.stop=function(){this.props.endTime=window.performance.now(),this.flashScreen("success");var e=this.prepData();e.avg&&e.records.length>0?this.config.save&&"function"==typeof this.config.save?this.config.save(e):this.save(e):console.error("No benchmark data collected",e)},o.prepData=function(){var e=this;return{userAgent:t(),avg:n(e.props.collectedFPS),records:e.props.collectedFPS,timeStamp:Date.now()}},o.save=function(e){console.log(e)},window.fps={init:function(e){o.init(e)}}}();